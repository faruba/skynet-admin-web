(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1de38523"],{1293:function(e,t,a){},3520:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addNodeDialogVisible=!0}}},[e._v("添加节点")]),a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{align:"center",label:"#",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index)+" ")]}}])}),a("el-table-column",{attrs:{prop:"name",label:"节点名字",align:"center"}}),a("el-table-column",{attrs:{prop:"addr",label:"节点地址",align:"center"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"更新时间",align:"center"}}),a("el-table-column",{attrs:{prop:"st",label:"状态",align:"center"}}),a("el-table-column",{attrs:{prop:"sttime",label:"状态更新时间",align:"center"}}),a("el-table-column",{attrs:{prop:"operate",label:"操作",width:"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"新增节点",visible:e.addNodeDialogVisible},on:{"update:visible":function(t){e.addNodeDialogVisible=t}}},[a("el-form",{attrs:{model:e.addForm}},[a("el-form-item",{attrs:{label:"节点名字","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"节点地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on",placeholder:"格式为 ip:port"},model:{value:e.addForm.addr,callback:function(t){e.$set(e.addForm,"addr",t)},expression:"addForm.addr"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addNodeDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAddCluster()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改节点",visible:e.updateNodeDialogVisible},on:{"update:visible":function(t){e.updateNodeDialogVisible=t}}},[a("el-form",{attrs:{model:e.updateForm}},[a("el-form-item",{attrs:{label:"节点名字","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}})],1),a("el-form-item",{attrs:{label:"节点地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on",placeholder:"格式为 ip:port"},model:{value:e.updateForm.addr,callback:function(t){e.$set(e.updateForm,"addr",t)},expression:"updateForm.addr"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateNodeDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdateCluster()}}},[e._v("确 定")])],1)],1)],1)},o=[],l=(a("d81d"),a("b0c0"),a("7ea2")),i=a("ed08"),r={data:function(){return{list:null,addNodeDialogVisible:!1,updateNodeDialogVisible:!1,addForm:{name:"",addr:""},updateForm:{name:"",addr:""},formLabelWidth:"160px"}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;Object(l["d"])().then((function(t){e.list=t.data.nodes.map((function(e){return e.createtime&&(e.createtime=Object(i["a"])(e.createtime)),e.updatetime&&(e.updatetime=Object(i["a"])(e.updatetime)),e.sttime&&(e.sttime=Object(i["a"])(e.sttime)),e}))}))},handleDelete:function(e){var t=this;this.$confirm("确定删除节点 "+e.name+" 吗？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["b"])({name:e.name}).then((function(e){"OK"===e.code?(t.$message({type:"success",message:"删除成功!"}),t.fetchData()):t.$message({type:"warning",message:e.msg})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleAddCluster:function(){var e=this;Object(l["a"])({name:this.addForm.name,addr:this.addForm.addr}).then((function(t){"OK"===t.code?(e.$message({type:"success",message:"添加节点成功!"}),e.fetchData()):e.$message({type:"warning",message:t.msg})}))},handleUpdate:function(e){this.updateForm.name=e.name,this.updateForm.addr=e.addr,this.updateNodeDialogVisible=!0},handleUpdateCluster:function(){var e=this;Object(l["f"])({name:this.updateForm.name,addr:this.updateForm.addr}).then((function(t){"OK"===t.code?(e.$message({type:"success",message:"修改节点成功!"}),e.updateNodeDialogVisible=!1,e.fetchData()):e.$message({type:"warning",message:t.msg})}))},handleDetail:function(e){this.$router.push({path:"/cluster/status",query:{nodename:e.name}})}}},d=r,s=(a("bce3"),a("2877")),c=Object(s["a"])(d,n,o,!1,null,"7fff9723",null);t["default"]=c.exports},"7ea2":function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"c",(function(){return d})),a.d(t,"e",(function(){return s}));var n=a("b775");function o(){return Object(n["a"])({url:"/cluster/list",method:"get"})}function l(e){return Object(n["a"])({url:"/cluster/del",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/cluster/add",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/cluster/update",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/cluster/detail/"+e,method:"get"})}function s(){return Object(n["a"])({url:"/cluster/nodenames",method:"get"})}},bce3:function(e,t,a){"use strict";a("1293")}}]);