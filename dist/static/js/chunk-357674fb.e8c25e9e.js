(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-357674fb"],{3520:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.addNodeDialogVisible=!0}}},[t._v("添加节点")]),a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{align:"center",label:"#",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index)+" ")]}}])}),a("el-table-column",{attrs:{prop:"name",label:"节点名字",align:"center"}}),a("el-table-column",{attrs:{prop:"addr",label:"节点地址",align:"center"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"更新时间",align:"center"}}),a("el-table-column",{attrs:{prop:"st",label:"状态",align:"center"}}),a("el-table-column",{attrs:{prop:"sttime",label:"状态更新时间",align:"center"}}),a("el-table-column",{attrs:{prop:"operate",label:"操作",width:"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v("详情")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"新增节点",visible:t.addNodeDialogVisible},on:{"update:visible":function(e){t.addNodeDialogVisible=e}}},[a("el-form",{attrs:{model:t.addForm}},[a("el-form-item",{attrs:{label:"节点名字","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"节点地址","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on",placeholder:"格式为 ip:port"},model:{value:t.addForm.addr,callback:function(e){t.$set(t.addForm,"addr",e)},expression:"addForm.addr"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addNodeDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAddCluster()}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改节点",visible:t.updateNodeDialogVisible},on:{"update:visible":function(e){t.updateNodeDialogVisible=e}}},[a("el-form",{attrs:{model:t.updateForm}},[a("el-form-item",{attrs:{label:"节点名字","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.updateForm.name,callback:function(e){t.$set(t.updateForm,"name",e)},expression:"updateForm.name"}})],1),a("el-form-item",{attrs:{label:"节点地址","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on",placeholder:"格式为 ip:port"},model:{value:t.updateForm.addr,callback:function(e){t.$set(t.updateForm,"addr",e)},expression:"updateForm.addr"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.updateNodeDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleUpdateCluster()}}},[t._v("确 定")])],1)],1)],1)},o=[],l=(a("d81d"),a("b0c0"),a("7ea2")),r=a("ed08"),i={data:function(){return{list:null,addNodeDialogVisible:!1,updateNodeDialogVisible:!1,addForm:{name:"",addr:""},updateForm:{name:"",addr:""},formLabelWidth:"160px"}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;Object(l["d"])().then((function(e){e.data.nodes.map?t.list=e.data.nodes.map((function(t){return t.createtime&&(t.createtime=Object(r["a"])(t.createtime)),t.updatetime&&(t.updatetime=Object(r["a"])(t.updatetime)),t.sttime&&(t.sttime=Object(r["a"])(t.sttime)),t})):t.list=null}))},handleDelete:function(t){var e=this;this.$confirm("确定删除节点 "+t.name+" 吗？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["b"])({name:t.name}).then((function(t){"OK"===t.code?(e.$message({type:"success",message:"删除成功!"}),Object(l["f"])(),e.fetchData()):e.$message({type:"warning",message:t.msg})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleAddCluster:function(){var t=this;Object(l["a"])({name:this.addForm.name,addr:this.addForm.addr}).then((function(e){"OK"===e.code?(t.$message({type:"success",message:"添加节点成功!"}),Object(l["f"])(),t.fetchData()):t.$message({type:"warning",message:e.msg})}))},handleUpdate:function(t){this.updateForm.name=t.name,this.updateForm.addr=t.addr,this.updateNodeDialogVisible=!0},handleUpdateCluster:function(){var t=this;Object(l["g"])({name:this.updateForm.name,addr:this.updateForm.addr}).then((function(e){"OK"===e.code?(t.$message({type:"success",message:"修改节点成功!"}),t.updateNodeDialogVisible=!1,Object(l["f"])(),t.fetchData()):t.$message({type:"warning",message:e.msg})}))},handleDetail:function(t){this.$router.push({path:"/cluster/status",query:{nodename:t.name}})}}},d=i,s=(a("c4d3"),a("2877")),c=Object(s["a"])(d,n,o,!1,null,"441fde1e",null);e["default"]=c.exports},6648:function(t,e,a){},"7ea2":function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return r})),a.d(e,"g",(function(){return i})),a.d(e,"c",(function(){return d})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return c}));var n=a("b775");function o(){return Object(n["a"])({url:"/cluster/list",method:"get"})}function l(t){return Object(n["a"])({url:"/cluster/del",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/cluster/add",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/cluster/update",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/cluster/detail/"+t,method:"get"})}function s(){return Object(n["a"])({url:"/cluster/nodenames",method:"get"})}function c(){return Object(n["a"])({url:"/cluster/reload",method:"post"})}},c4d3:function(t,e,a){"use strict";a("6648")}}]);